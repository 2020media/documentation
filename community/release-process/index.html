<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Release process - Aegir Hosting System</title>
  

  <link rel="shortcut icon" href="../../_images/favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../_css/toc.css" rel="stylesheet">
  <link href="../../_css/menu.css" rel="stylesheet">
  <link href="../../_css/images.css" rel="stylesheet">
  <link href="../../_css/style.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Release process";
    var mkdocs_page_input_path = "community/release-process.md";
    var mkdocs_page_url = "/community/release-process/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../_js/menu.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Aegir Hosting System</a>
        <div role="search">
  <form id ="rtd-search-form-alt" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../quick-start/">Quick start</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../install/">Install</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Install</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/upgrade/">Upgrade</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/uninstall/">Uninstall</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../usage/">Using Aegir</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Using Aegir</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/verify/">Verifying servers, platforms and sites</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/sites/">Sites</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Sites</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/sites/tasks/">Site tasks</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/sites/aliases/">Site aliases</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/sites/importing/">Importing sites</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/platforms/">Platforms</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Platforms</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/platforms/tasks/">Platform tasks</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/advanced/">Advanced features</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Advanced features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/advanced/ssl/">SSL</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/advanced/remote-servers/">Multiple servers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/advanced/clients/">Access control</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../usage/advanced/provisionacl/">ProvisionACL</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../extend/">Extending Aegir</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Extending Aegir</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../extend/frontend/">Frontend</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../extend/backend/">Backend</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../extend/altering-behaviours/">Altering behaviours</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../extend/contrib/">Contributed projects</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../develop/">Developing Aegir</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developing Aegir</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../develop/terminology/">Design and terminology</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../develop/architecture/">Architecture</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../develop/provision/">Provision</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Provision</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../develop/provision/contexts/">Contexts</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../develop/repositories/">Projects repositories</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../help/contact/">Help</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../">Community</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Community</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../code-of-conduct/">Code of Conduct</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-team/">Core team</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Core team</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-team/criteria/">Criteria</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-team/leadership/">Leadership</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-team/welcome/">Welcoming a new member</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Release process</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#release-process">Release Process</a></li>
                
                    <li><a class="toctree-l4" href="#the-release-cycle">The release cycle</a></li>
                
                    <li><a class="toctree-l4" href="#steps-for-a-release">Steps for a release</a></li>
                
            
            </ul>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Release process</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="debian-packaging/">Debian packaging</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../resources/">Resources</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.4/">Release notes</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Release notes</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.0/">3.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.1/">3.1</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.2/">3.2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.3/">3.3</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.4/">3.4</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.5/">3.5</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.6/">3.6</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../release-notes/3.7/">3.7</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Aegir Hosting System</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Community &raquo;</li>
        
      
    
    <li>Release process</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/aegir-project/documentation" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="release-process">Release Process</h1>
<div class="toc">
<ul>
<li><a href="#release-process">Release Process</a><ul>
<li><a href="#the-release-cycle">The release cycle</a></li>
<li><a href="#steps-for-a-release">Steps for a release</a><ul>
<li><a href="#1-make-sure-our-tests-are-all-green">1. Make sure our tests are all green</a><ul>
<li><a href="#11-disable-debian-dev-builds">1.1 Disable Debian dev builds</a></li>
</ul>
</li>
<li><a href="#2-verify-drupal-orgmake">2. Verify drupal-org.make</a></li>
<li><a href="#3-generating-the-release-notes">3. Generating the release notes</a></li>
<li><a href="#4-running-the-releasesh-script">4. Running the release.sh script</a></li>
<li><a href="#5-test-the-manual-install-in-jenkins">5. Test the manual install in Jenkins</a></li>
<li><a href="#6-build-the-debian-packages">6. Build the Debian packages</a><ul>
<li><a href="#61-fix-debian-packages-only">6.1 Fix Debian packages only</a></li>
</ul>
</li>
<li><a href="#7-creating-release-nodes-on-drupalorg">7. Creating release nodes on Drupal.org</a></li>
<li><a href="#8-test-the-upgrade-in-jenkins">8. Test the upgrade in Jenkins</a></li>
<li><a href="#9-manually-test-install-and-upgrade">9. Manually test install and upgrade</a><ul>
<li><a href="#91-quick-test-vms">9.1. Quick test VMs</a></li>
</ul>
</li>
<li><a href="#10-publish-the-debian-packages">10. Publish the Debian packages</a></li>
<li><a href="#11-publish-the-release-notes-widely">11. Publish the release notes widely</a></li>
<li><a href="#12-re-enable-the-debian-dev-build-job">12. Re-enable the debian dev build job</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>This page aims to document our release process. It documents the release cycle, but also the steps required to make a release.</p>
<h2 id="the-release-cycle">The release cycle</h2>
<p>In general, each major Aegir release comprises a simultaneous release of all the modules that are part of the project. We generally go through several testing releases (alphas, betas &amp; RCs) before doing the first stable release on a branch.</p>
<ul>
<li>First an <strong>alpha</strong> is released to test new functionalities and to accomplish the goals decided in the project roadmap for that major version. Example: <code>3.0-alpha1</code></li>
<li>When we have covered most of the functionalities outlined in the roadmap, we push out <strong>beta releases</strong> until no more critical issues show up. This is generally considered a <em>soft feature freeze</em>. Example: <code>3.0-beta1</code></li>
<li>Then we go into <em>full feature freeze</em> and release a <strong>first release candidate</strong> (RC). Then a stable release branch is created, and the development branch is kept opened for development for the next stable release. This is generally considered a <em>soft API freeze</em>. Release candidates are made as long as critical bugs are found. Example: <code>3.0-rc1</code>.</li>
<li>Once the development branch has no known critical bugs, the <strong>stable release</strong> is announced. From there on only critical fixes (security, critical performance and critical bugfixes) are committed to the stable branch, and stable releases are published (without alpha/beta/RC) directly on the stable branch. The stable branch is in <strong>full API freeze</strong>. New features are generally committed to the development branch.</li>
</ul>
<h2 id="steps-for-a-release">Steps for a release</h2>
<h3 id="1-make-sure-our-tests-are-all-green">1. Make sure our tests are all green</h3>
<p>Look into <a href="http://ci.aegirproject.org/">Jenkins</a> and <a href="https://github.com/aegir-project/tests/">Travis</a> to see if all tasks have been performed without errors since the last commit. If there is an error, fix it before the release.</p>
<h4 id="11-disable-debian-dev-builds">1.1 Disable Debian dev builds</h4>
<p>It is important to disable the Jenkins job named <a href="http://ci.aegirproject.org/view/Debian%20dev%20builds/job/D_aegir-debian-build-3x/">D_aegir-debian-build-3x</a>. This prevents later troubles in the <a href="#10-publish-the-debian-packages">Publish the Debian packages</a> section. Otherwise a dev package may be built after the stable one, but before it has been promoted to the <code>testing</code> and <code>stable</code> repositories. As this will have a higher version number, it would take precedence when publishing to the <code>stable</code> repo.</p>
<h3 id="2-verify-drupal-orgmake">2. Verify drupal-org.make</h3>
<p>In the hostmaster project we maintain our own drupal-org.make file. Verify that drupal-org.make specifies up-to-date versions. Check that e.g. the ctools version specified is not out-dated.</p>
<h3 id="3-generating-the-release-notes">3. Generating the release notes</h3>
<p>We build complete release notes for every release. Those are made up of a summary of the release, an outline of key changes, of known issues, install and upgrade instructions and a full list of bugfixes and new features.
As we have a number of Drupal.org projects to cover we try to centralize our release notes combined with the documentation. Published under the release notes section.
On Drupal.org we add a link to the version specific release notes page on the release nodes for all projects we cover.</p>
<p>Using <a href="https://www.drupal.org/project/grn">Git Release Notes for Drush</a>
 with <a href="https://www.drupal.org/node/2609134">a patch for the MD format</a>:</p>
<p><code>drush rn --baseurl=https://www.drupal.org/ --md 7.x-3.3 HEAD</code></p>
<p>or after placing the tags</p>
<p><code>drush rn --baseurl=https://www.drupal.org/ --md 7.x-3.3 7.x-3.4</code></p>
<p>This is done for the different git projects. Changing the first line to add 'to $name'.
The developers then proceed to format/edit the list of fixes as well as list other significant information/changes for this release. These notes end up becoming the Release Notes for the release.</p>
<p>Add it as a new file under <a href="https://github.com/aegir-project/documentation/tree/3.x/docs/release-notes">release-notes</a>, and add a line to <a href="https://github.com/aegir-project/documentation/blob/3.x/mkdocs.yml">mkdocs.yml</a></p>
<h3 id="4-running-the-releasesh-script">4. Running the release.sh script</h3>
<p>Each time we make a new release, we run a script called <code>release.sh</code> in provision. This script does all the 'hard' work in that it doesn't forget all the very many places to edit version numbers etc of relevant documentation and other scripts. This includes install.sh.txt and upgrade.sh.txt.</p>
<p>Paraphrasing from the script itself:</p>
<pre><code>$ ./release.sh 3.4

Aegir release script
====================

This script should only be used by the core dev team when doing an
official release. If you are not one of those people, you probably
shouldn't be running this.

This script is going to modify the configs and documentation to
release 7.x-3.7.

The following operations will be done:
 0. prompt you for a debian/changelog entry
 1. change the makefile to download tarball
 2. change the upgrade.sh.txt version
 3. display the resulting diff
 4. commit those changes to git
 5. lay down the tag
 6. revert the commit
 7. clone fresh copies of hosting/hostmaster and eldir to lay down the tag
 8. (optionally) push those changes
 9. clone fresh copies of golden contrib to lay down the tag
10. (optionally) push those changes

 ARE YOU SURE you disabled the D_aegir-debian-build-3x job in Jenkins?

The operation can be aborted before step 8. Don't forget that as
long as changes are not pushed upstream, this can all be reverted (see
git-reset(1) and git-revert(1) ).
</code></pre>

<p>Notice how we just provide the Aegir release number (<code>3.4</code>) to the release script, not the Drupal branch (<code>7.x</code>), which is hardcoded in the script to remove potential confusion.</p>
<h3 id="5-test-the-manual-install-in-jenkins">5. Test the manual install in Jenkins</h3>
<p>Before making a full release, test the release in Jenkins. To do so, start a build of the <a href="http://ci.aegirproject.org/job/P_Aegir_Puppet_Module_functional_test_Aegir3-dev-Drush8/">P_Aegir_Puppet_Module_functional_test_Aegir3-dev-Drush8</a> job. Similar job exist for <a href="http://ci.aegirproject.org/job/P_Aegir_Puppet_Module_functional_test_Aegir3-dev-Drush7/">Drush7</a> and <a href="http://ci.aegirproject.org/job/P_Aegir_Puppet_Module_functional_test_Aegir3-dev-Drush6/">Drush6</a></p>
<p>If any of these builds fail, delete the remote tags (using <code>git push origin :7.x-3.4</code>, for example), fix the bugs and start again.</p>
<h3 id="6-build-the-debian-packages">6. Build the Debian packages</h3>
<p>Build the package and upload to <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org/">http://debian.aegirproject.org/</a>. Jenkins can build and upload a Debian package for you with <a href="http://ci.aegirproject.org/job/S_aegir-debian-official-3.x/">the S_aegir-debian-official-3.x job</a>. Enter the latest tag in the <code>JENKINS_AEGIR_TAG</code> field (e.g. <code>7.x-3.4</code>).</p>
<p>If you need to move the tags again, you will need to clear the testing archive using the <a href="http://ci.aegirproject.org/job/R%20clear%20repo/">R clear repo job</a>, with the testing argument.</p>
<p>You can also build and upload the package yourself as explained in these <a href="../release-process/debian-packaging/">detailed instructions</a>. We first upload the package to the <code>testing</code> distribution, and it gets migrated down into <code>stable</code> after tests.</p>
<h4 id="61-fix-debian-packages-only">6.1 Fix Debian packages only</h4>
<p>When there's a bug in the Debian packaging itself we can do a minor package version update. <strong>USE WITH CARE!</strong></p>
<pre><code>cd &lt;provision source&gt;
&lt;Fix&gt;
git commit
git tag &lt;previous version tag&gt;.1
git push --tags
</code></pre>
<p>TODO: We also need to update version numbers(as release.sh does), but only for provision. Maybe the script can get an option for it...</p>
<p>We don't create a release node on Drupal.org, just run the <a href="http://ci.aegirproject.org/job/S_aegir-debian-official-3.x/">S_aegir-debian-official-3.x job</a> job. And publish as listed below.</p>
<h3 id="7-creating-release-nodes-on-drupalorg">7. Creating release nodes on Drupal.org</h3>
<p>Once the tags are pushed and release notes published, we create a release node with an excerpt of (and a link to) the release notes so that tarballs are created and issue queue versions updated.</p>
<p>Using the template (change the version number):</p>
<pre><code>See the full release notes at: http://docs.aegirproject.org/en/3.x/release-notes/3.7/
</code></pre>

<p>This needs to be done in the <a href="https://drupal.org/node/add/project-release/196005">provision</a> and <a href="https://drupal.org/node/add/project-release/196008">hosting</a> and (maybe) <a href="https://drupal.org/node/add/project-release/452774">eldir</a> projects on Drupal.org.
And for Golden Contrib...
<a href="https://drupal.org/node/add/project-release/1982662">hosting_civicrm</a>,
<a href="https://drupal.org/node/add/project-release/2217793">hosting_git</a>,
<a href="https://drupal.org/node/add/project-release/1405640">hosting_remote_import</a>,
<a href="https://drupal.org/node/add/project-release/1459830">hosting_site_backup_manager</a> and
<a href="https://drupal.org/node/add/project-release/1738498">hosting_tasks_extra</a></p>
<p>WAIT.... And after those are fully build... in the <a href="https://drupal.org/node/add/project-release/195997">hostmaster</a> project.</p>
<p>Note: this could be <a href="https://www.drupal.org/node/1050618">automated</a> with the right stuff on Drupal.org.</p>
<h3 id="8-test-the-upgrade-in-jenkins">8. Test the upgrade in Jenkins</h3>
<p>Once all reease nodes have been created you can test the upgrade of the Debian packages by running the following Jenkins job:</p>
<ul>
<li><a href="http://ci.aegirproject.org/view/Upgrades/job/U_aegir_7.x-3.x-stable-to-unstable-deb-package">7.x-3.x-stable-to-unstable</a></li>
<li><a href="http://ci.aegirproject.org/view/Upgrades/job/U_aegir_6.x-2.x_to_7.x-3.x_upgrade/">6.x-2.x_to_7.x-3.x_upgrade</a></li>
</ul>
<h3 id="9-manually-test-install-and-upgrade">9. Manually test install and upgrade</h3>
<p>If the Jenkins tests are disabled in one of the early steps, you should test the install and upgrade to the new version in a local VM. (Vagrant is very useful for this, the provision repo has a Vagrantfile.)</p>
<p>At this point, the unstable repo actually contains the future stable version (ie 3.1 instead of 3.1-dev-abc). Check that it actually does: <a href="http://debian.aegirproject.org/dists/unstable/main/binary-amd64/Packages">http://debian.aegirproject.org/dists/unstable/main/binary-amd64/Packages</a></p>
<p>To test the install, just use the instructions on http://www.aegirproject.org but replace "stable" by "unstable". You should end up with a stable version.</p>
<p>To test the upgrade, create a new VM, install normally with the aegirproject.org instructions, then replace stable by unstable in your lists (/etc/apt/), and run</p>
<pre><code>apt-get update &amp;&amp; apt-get upgrade
</code></pre>
<p>It should ask you if you want to upgrade Aegir3. Say yes and make sure there are no errors.</p>
<p>If you don't encounter errors in this procedure, you're good to go.</p>
<h4 id="91-quick-test-vms">9.1. Quick test VMs</h4>
<p>You can use an Vagrant base box to quickly test the install and upgrade. Some such boxes are optimized for Aegir development and testing:</p>
<ul>
<li>Debian VirtualBox: <a href="https://atlas.hashicorp.com/PraxisLabs/boxes/jessie64-aegir3-dev.box">PraxisLabs/jessie64-aegir3-dev.box</a></li>
</ul>
<p>(Please add your base box to the list if relevant.)</p>
<h3 id="10-publish-the-debian-packages">10. Publish the Debian packages</h3>
<p>Finally, when the Debian packages are tested you will need to pull them into the stable release channel:</p>
<p>We pull to stable (since the betas), manually:</p>
<pre><code>ssh jenkins@ci.aegirproject.org
sudo su - reprepro
reprepro@zeus:~$
reprepro copy stable unstable aegir3
reprepro copy stable unstable aegir3-hostmaster
reprepro copy stable unstable aegir3-provision
reprepro copy stable unstable aegir3-cluster-slave
</code></pre>
<p>If Jenkins has managed to build .debs and upload them before you've have a chance to pull them into testing/stable, you can manually remove them like so:</p>
<pre><code>reprepro remove unstable aegir3-cluster-slave aegir3 aegir3-provision aegir3-hostmaster
</code></pre>
<p>This should be prevented by disabling the Jenkins jobs named <code>D_aegir-debian*</code> before starting to push the release tags.</p>
<p>You can then re-upload the new .debs you've generated, using the '-f' (force) flag:</p>
<pre><code>dput -f aegir build-area/aegir2-provision_2.3_amd64.changes
</code></pre>
<p>After doing that, you can re-run the 'copy' commands to publish the .debs to the appropriate releases.</p>
<h3 id="11-publish-the-release-notes-widely">11. Publish the release notes widely</h3>
<p>Once all this is done and the tarballs are generated, the release notes are published in:</p>
<ul>
<li>The <a href="http://docs.aegirproject.org">docs</a></li>
<li>Update the upgrade.sh link in the <a href="http://docs.aegirproject.org/en/3.x/install/upgrade/#upgrades-with-upgradesh-script">documentation</a></li>
<li>The topic of the IRC channel</li>
<li>The aegir-announce mailing list (<a href="mailto:announce@lists.aegirproject.org">announce@lists.aegirproject.org</a>.)</li>
<li>Twitter as @aegirproject<ul>
<li>Template: "#aegir 3.? released! Release notes at http://docs.aegirproject.org/en/3.x/release-notes/3.?/"</li>
</ul>
</li>
</ul>
<p>Optionally, blog posts on <a href="http://koumbit.org">koumbit.org</a>, <a href="http://mig5.net">mig5.net</a>, and elsewhere may go into further detail about significant changes, screencasts etc.</p>
<h3 id="12-re-enable-the-debian-dev-build-job">12. Re-enable the debian dev build job</h3>
<p>The job that was disabled in section 2.1.1 can now be enabled again.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="debian-packaging/" class="btn btn-neutral float-right" title="Debian packaging">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../core-team/welcome/" class="btn btn-neutral" title="Welcoming a new member"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/aegir-project/documentation" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../core-team/welcome/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="debian-packaging/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
